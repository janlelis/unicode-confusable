# Unicode::Confusable [![[version]](https://badge.fury.io/rb/unicode-confusable.svg)](https://badge.fury.io/rb/unicode-confusable)  [![[ci]](https://github.com/janlelis/unicode-confusable/workflows/Test/badge.svg)](https://github.com/janlelis/unicode-confusable/actions?query=workflow%3ATest)

Compares two strings if they are visually confusable as described in [UnicodeÂ® Technical Standard #39](https://www.unicode.org/reports/tr39/#Confusable_Detection): Both strings get transformed into a skeleton format before comparing them. The skeleton is generated by normalizing the string ([NFD](http://unicode.org/reports/tr15/#Norm_Forms)), removing ignorable characters, replacing [confusable characters](https://unicode.org/Public/security/16.0.0/confusables.txt), and normalizing the string again.

Unicode version: **17.0.0** (September 2025)

\* The Unicode normalization [depends on your Ruby version](https://idiosyncratic-ruby.com/73-unicode-version-mapping.html)

Please note: The TR39 standard now includes detection of confusables based on bidi formatting (i.e. right-to-left text). This is currently not supported by this gen.

Supported Rubies: **3.x** (might stil work: **2.x**)

## Usage

### Confusable?

```ruby
require "unicode/confusable"

Unicode::Confusable.confusable? "a", "b" # => false
Unicode::Confusable.confusable? "C", "Ğ¡" # => true
Unicode::Confusable.confusable? "â„œğ˜‚á–¯Ê", "Ruby" # => true
Unicode::Confusable.confusable? "Michael", "Michae1" # => true
Unicode::Confusable.confusable? "â‡", "?" # => false
Unicode::Confusable.confusable? "â‡", "??" # => true
```

### Skeleton

```ruby
Unicode::Confusable.skeleton "â„œğ˜‚á–¯Ê" # => "Ruby"
```

**Please note:** The skeleton is an intermediate representation, not meant for any other use than testing confusability, [according to the standard](https://www.unicode.org/reports/tr39/#Confusable_Detection).

### List

List all characters that map to the confusable exemplar given:

```ruby
Unicode::Confusable.list("o", false)
# => ["à°‚", "à²‚", "à´‚", "à¶‚", "à¥¦", "à©¦", "à«¦", "à¯¦", "à±¦", "à³¦", "àµ¦", "à¹", "à»", "á€", "Ù¥", "Ûµ", "ï½", "â„´", "ğ¨", "ğ‘œ", "ğ’", "ğ“¸", "ğ”¬", "ğ• ", "ğ–”", "ğ—ˆ", "ğ—¼", "ğ˜°", "ğ™¤", "ğš˜", "á´", "á´‘", "ê¬½", "Î¿", "ğ›", "ğœŠ", "ğ„", "ğ¾", "ğ¸", "Ïƒ", "ğ›”", "ğœ", "ğˆ", "ğ‚", "ğ¼", "â²Ÿ", "Ğ¾", "áƒ¿", "Ö…", "×¡", "Ù‡", "ğ¸¤", "ğ¹¤", "ğº„", "ï»«", "ï»¬", "ï»ª", "ï»©", "Ú¾", "ï®¬", "ï®­", "ï®«", "ï®ª", "Û", "ï®¨", "ï®©", "ï®§", "ï®¦", "Û•", "à´ ", "á€", "ğ“ª", "ğ‘£ˆ", "ğ‘£—", "ğ¬"]
```

If you omit the second parameter, it will also show confusables, where the given character is just a part of:

```ruby
Unicode::Confusable.list("o")
# => ["â’ª", "êœµ", "â„…", "á´”", "ê­", "ê­‚", "ï·²", "â„–", "à°‚", "à²‚", "à´‚", "à¶‚", "à¥¦", "à©¦", "à«¦", "à¯¦", "à±¦", "à³¦", "àµ¦", "à¹", "à»", "á€", "Ù¥", "Ûµ", "ï½", "â„´", "ğ¨", "ğ‘œ", "ğ’", "ğ“¸", "ğ”¬", "ğ• ", "ğ–”", "ğ—ˆ", "ğ—¼", "ğ˜°", "ğ™¤", "ğš˜", "á´", "á´‘", "ê¬½", "Î¿", "ğ›", "ğœŠ", "ğ„", "ğ¾", "ğ¸", "Ïƒ", "ğ›”", "ğœ", "ğˆ", "ğ‚", "ğ¼", "â²Ÿ", "Ğ¾", "áƒ¿", "Ö…", "×¡", "Ù‡", "ğ¸¤", "ğ¹¤", "ğº„", "ï»«", "ï»¬", "ï»ª", "ï»©", "Ú¾", "ï®¬", "ï®­", "ï®«", "ï®ª", "Û", "ï®¨", "ï®©", "ï®§", "ï®¦", "Û•", "à´ ", "á€", "ğ“ª", "ğ‘£ˆ", "ğ‘£—", "ğ¬", "Û¿", "Ã¸", "ê¬¾", "Éµ", "ê‹", "Ó©", "Ñ³", "ê®", "ê®»", "ê­´", "ï³™", "Æ¡", "Å“", "É¶", "âˆ", "ê", "êš™", "ï³—", "ï±‘", "ï³˜", "ï±’", "ï¶“", "ï¶”", "ï±“", "ï±”", "àµŸ", "á€", "ê­£", "ï² ", "ï³¢", "ï²¥", "ï³¤", "ï·»", "ï´±", "ï³¨", "ï´²", "ï³ª", "ï·º", "ï··", "ï³", "ï³–", "ï³¯", "ï³", "ï³±", "ï³¦", "ï²›", "ï³ ", "ï¯­", "ï¯¬"]
```

## No Bidi-Confusable Check

Testing for bidirectional confusables is currently not supported.

## Single-script / Mixed-script / Whole-script

TR 39 also describes mechanisms for further categorization of confusables. This is currently not part of this gem, however the [unicode-scripts gem](https://github.com/janlelis/unicode-scripts) does include mixed-script detection, which you can use for this purpose.

See [unicode-x](https://github.com/janlelis/unicode-x) for more Unicode related micro libraries.

## MIT License

- Copyright (C) 2016-2025 Jan Lelis <https://janlelis.com>. Released under the MIT license.
- Unicode data: https://www.unicode.org/copyright.html#Exhibit1
